let o,e,n="djangowebdev.herokuapp.com",t=!1,c=!1;function l(){if(!0!==t)return t=!0,"https:"===location.protocol?(console.log("Attempting secure socket connection on "+n+"..."),o=new WebSocket(`wss://${n}/ws/demo`)):(console.log("Attempting socket connection on "+n+"..."),o=new WebSocket(`ws://${n}/ws/demo`)),o.onerror=n=>{1==o.readyState||c?(console.log("Socket error: ",n),clearInterval(e)):(t=!1,console.log("Error establishing connection: ",n))},o.onopen=()=>{c=!0,t=!1,o.onclose=e=>{o.onerror=null,console.log("Socket Closed Connection: ",e),console.log("Attempting to reestablish socket connection."),l()},console.log("Successfully Connected"),e=setInterval((()=>{o.send(JSON.stringify({type:"keep-alive"}))}),5e3)},o}const s=o=>{o.onclose=null,o.close(),clearInterval(e)};export{s as a,l as c};
